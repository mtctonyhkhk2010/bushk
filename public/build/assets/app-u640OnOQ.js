window.fetchEta=async(e,r,i=null,f=null,n=null,s=null)=>{let h,l=[];e==="kmb"&&(h=`https://data.etabus.gov.hk/v1/transport/kmb/eta/${r}/${i}/${f}`),e==="ctb"&&(h=`https://rt.data.gov.hk//v2/transport/citybus/eta/CTB/${r}/${i}`),e==="gmb"&&(h=`https://data.etagmb.gov.hk/eta/route-stop/${n}/${r}`);const c=await(await fetch(h)).json();return(e==="kmb"||e==="ctb")&&c.data.forEach(t=>{t.eta===""||t.eta===null||t.dir!==s||l.push({timestamp:Date.parse(t.eta),eta:t.eta,co:t.co,remark:t.rmk_tc})}),e==="gmb"&&c.data.forEach(t=>{s==="I"&&t.route_seq===1||s==="O"&&t.route_seq===2||t.eta.forEach(u=>{u.timestamp===""||u.timestamp===null||l.push({timestamp:Date.parse(u.timestamp),eta:u.timestamp,co:"gmb",remark:u.remarks_tc})})}),l};window.distance=(e,r,i,f)=>{if(e===i&&r===f)return 0;{let n=Math.PI*e/180,s=Math.PI*i/180,h=r-f,l=Math.PI*h/180,a=Math.sin(n)*Math.sin(s)+Math.cos(n)*Math.cos(s)*Math.cos(l);return a>1&&(a=1),a=Math.acos(a),a=a*180/Math.PI,a=a*60*1.1515,a*1.609344}};
